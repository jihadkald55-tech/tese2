# ุดุฑุญ ุขููุฉ ุงูุชุญูู ูู ููุน ุงูุญุณุงุจ (Role Validation)

## ๐ ููู ูุนูู ุงููุธุงู ุงูุขู

### ุงููุดููุฉ ุงูุณุงุจูุฉ:

- ูุงู ุฃู ูุณุชุฎุฏู ูุณุชุทูุน ุงูุฏุฎูู ูู ุฃู ูุงุฌูุฉ (ุทุงูุจ/ุฃุณุชุงุฐ/ูุฏูุฑ) ุทุงููุง ูุงู ุงูุฅูููู ููููุฉ ุงููุฑูุฑ ุตุญูุญุฉ
- ูู ููู ููุงู ูุญุต ูููุน ุงูุญุณุงุจ ุงููุณุฌู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงูุญู ุงููุทุจู:

โ **Separation of Concerns - ูุตู ุงููุงุฌูุงุช ุญุณุจ ููุน ุงูุญุณุงุจ**

---

## ๐ฏ ุขููุฉ ุงูุนูู ุงูุชูุตูููุฉ

### 1๏ธโฃ ุนูุฏ ูุญุงููุฉ ุชุณุฌูู ุงูุฏุฎูู:

```typescript
// ุงููุณุชุฎุฏู ูุฎุชุงุฑ ููุน ุงูุญุณุงุจ ูู ุงููุงุฌูุฉ
const userType = "student"; // ุฃู "professor" ุฃู "admin"

// ูุชู ุฅุฑุณุงู ููุน ุงูุญุณุงุจ ูุน ุทูุจ ุชุณุฌูู ุงูุฏุฎูู
await login(email, password, userType);
```

### 2๏ธโฃ ูู Backend (UserContext):

```typescript
// 1. ุงูุชุญูู ูู ุงูุฅูููู ููููุฉ ุงููุฑูุฑ
const { data, error } = await supabase.auth.signInWithPassword({
  email,
  password,
});

// 2. ุชุญููู ุจูุงูุงุช ุงููุณุชุฎุฏู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
const userData = await loadUserData(data.user);

// 3. โ ุงูุชุญูู ูู ููุน ุงูุญุณุงุจ (Role Validation)
if (role && userData.role !== role) {
  // ุชุณุฌูู ุงูุฎุฑูุฌ ุชููุงุฆูุงู
  await supabase.auth.signOut();

  // ุนุฑุถ ุฑุณุงูุฉ ูุงุถุญุฉ
  return {
    error: 'ูุฐุง ุงูุญุณุงุจ ูุณุฌู ูู "ุฃุณุชุงุฐ". ูุฑุฌู ุชุณุฌูู ุงูุฏุฎูู ูู ูุงุฌูุฉ ุงูุฃุณุงุชุฐุฉ.',
  };
}
```

---

## ๐ ุฃูุซูุฉ ุนูู ุงูุฑุณุงุฆู

### ูุซุงู 1: ุทุงูุจ ูุญุงูู ุงูุฏุฎูู ูู ูุงุฌูุฉ ุงูุฃุณุชุงุฐ

```
โ ูุฐุง ุงูุญุณุงุจ ูุณุฌู ูู "ุทุงูุจ". ูุฑุฌู ุชุณุฌูู ุงูุฏุฎูู ูู ูุงุฌูุฉ ุงูุทูุงุจ.
```

### ูุซุงู 2: ุฃุณุชุงุฐ ูุญุงูู ุงูุฏุฎูู ูู ูุงุฌูุฉ ุงููุฏูุฑ

```
โ ูุฐุง ุงูุญุณุงุจ ูุณุฌู ูู "ุฃุณุชุงุฐ". ูุฑุฌู ุชุณุฌูู ุงูุฏุฎูู ูู ูุงุฌูุฉ ุงูุฃุณุงุชุฐุฉ.
```

### ูุซุงู 3: ูุฏูุฑ ูุญุงูู ุงูุฏุฎูู ูู ูุงุฌูุฉ ุงูุทุงูุจ

```
โ ูุฐุง ุงูุญุณุงุจ ูุณุฌู ูู "ูุฏูุฑ". ูุฑุฌู ุชุณุฌูู ุงูุฏุฎูู ูู ูุงุฌูุฉ ุงููุฏุฑุงุก.
```

---

## ๐ ุชุฏูู ุงูุจูุงูุงุช (Data Flow)

```
1. ุงููุณุชุฎุฏู ูุฏุฎู:
   - ุงูุฅูููู โ๏ธ
   - ูููุฉ ุงููุฑูุฑ ๐
   - ููุน ุงูุญุณุงุจ ุงููุทููุจ ๐ค (ุทุงูุจ/ุฃุณุชุงุฐ/ูุฏูุฑ)

2. ุงููุธุงู ูุชุญูู:
   โ ุงูุฅูููู ููููุฉ ุงููุฑูุฑ ุตุญูุญุฉุ
   โ ูุญูู ุจูุงูุงุช ุงููุณุชุฎุฏู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
   โ ููุน ุงูุญุณุงุจ ุงููุณุฌู ูุทุงุจู ุงูููุน ุงููุทููุจุ

3. ุงููุชูุฌุฉ:
   โ ุฅุฐุง ุชุทุงุจู โ ุงูุณูุงุญ ุจุงูุฏุฎูู
   โ ุฅุฐุง ูู ูุชุทุงุจู โ ุฑูุถ ุงูุฏุฎูู + ุฑุณุงูุฉ ูุงุถุญุฉ
```

---

## ๐ก๏ธ ุงูุฃูุงู ุงููุถุงู

- **ููุน ุงููุตูู ุบูุฑ ุงููุตุฑุญ**: ูุง ูููู ููุทุงูุจ ุงูุฏุฎูู ููุงุฌูุฉ ุงูุฃุณุชุงุฐ
- **ุชุณุฌูู ุฎุฑูุฌ ุชููุงุฆู**: ุฅุฐุง ุญุงูู ุงููุณุชุฎุฏู ุงูุฏุฎูู ูู ูุงุฌูุฉ ุฎุงุทุฆุฉุ ูุชู ุชุณุฌูู ุฎุฑูุฌู ููุฑุงู
- **ุฑุณุงุฆู ูุงุถุญุฉ**: ุงููุณุชุฎุฏู ูุนุฑู ุจุงูุถุจุท ูุง ุงููุดููุฉ ูููู ูุญููุง

---

## ๐ป ุงููููุงุช ุงููุนุฏูุฉ

- [`src/contexts/UserContext.tsx`](src/contexts/UserContext.tsx) - ุฅุถุงูุฉ ููุทู ุงูุชุญูู ูู ุงูููุน
  - `loadUserData()` - ุงูุขู ุชุฑุฌุน ุจูุงูุงุช ุงููุณุชุฎุฏู ุจุฏูุงู ูู true/false
  - `login()` - ุฅุถุงูุฉ ุงูุชุญูู ูู ุงูุชุทุงุจู ุจูู role ุงููุทููุจ ูุงููุณุฌู

---

## ๐งช ุงุฎุชุจุงุฑ ุงูููุฒุฉ

### ุงูุณููุงุฑูู 1: ุชุณุฌูู ุฏุฎูู ุตุญูุญ

```
1. ุงุฐูุจ ุฅูู /login
2. ุงุฎุชุฑ "ุทุงูุจ"
3. ุฃุฏุฎู ุจูุงูุงุช ุญุณุงุจ ูุณุฌู ูุทุงูุจ
4. ุงููุชูุฌุฉ: โ ุฏุฎูู ูุงุฌุญ
```

### ุงูุณููุงุฑูู 2: ูุญุงููุฉ ุฏุฎูู ูู ูุงุฌูุฉ ุฎุงุทุฆุฉ

```
1. ุงุฐูุจ ุฅูู /login
2. ุงุฎุชุฑ "ุฃุณุชุงุฐ"
3. ุฃุฏุฎู ุจูุงูุงุช ุญุณุงุจ ูุณุฌู ูุทุงูุจ
4. ุงููุชูุฌุฉ: โ ุฑุณุงูุฉ ุฎุทุฃ ูุงุถุญุฉ
```

---

## ๐จ ูุงุฌูุฉ ุงููุณุชุฎุฏู

ุงููุงุฌูุฉ ุชุญุชูู ุนูู 3 ุฃุฒุฑุงุฑ ูุงุฎุชูุงุฑ ููุน ุงูุญุณุงุจ:

- ๐ **ุทุงูุจ**: ููุญุณุงุจุงุช ุงููุณุฌูุฉ ูุทูุงุจ
- ๐ **ุฃุณุชุงุฐ**: ููุญุณุงุจุงุช ุงููุณุฌูุฉ ูุฃุณุงุชุฐุฉ
- โก **ูุฏูุฑ**: ููุญุณุงุจุงุช ุงููุณุฌูุฉ ููุฏุฑุงุก

ูู ุฒุฑ ูุฑุณู ููุน ุงูุญุณุงุจ ุงููุทููุจ ูุน ุทูุจ ุชุณุฌูู ุงูุฏุฎูู.
